<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link rel="stylesheet" href="css/w3.css">
    <link rel="stylesheet" href="css/site.css">
</head>
<body>
    <div class="w3-container w3-dark-grey">
        <h2 data-bind="text: currentTab"></h2>
    </div>
     <div class="w3-bar w3-black">
        <button class="w3-bar-item w3-button" data-open="exchangeRates" data-bind="click: openTab">Exchange rates</button>
        <button class="w3-bar-item w3-button" data-open="probabilityCalculator" data-bind="click: openTab">Probability calculator</button>
    </div> 
    
    <div id="exchangeRates" class="tab" data-bind="with: exchangeRatesViewModel">
        <div class="w3-row w3-margin">
            <div class="w3-margin-bottom" data-bind="with: addHandler">
                <button class="w3-button w3-blue-grey" data-bind="click: add, enable: !addMode()">Add new</button>
            </div>
            <table class="w3-col m6 l5 w3-table-all w3-centered w3-margin-right">
                <thead>
                    <tr class="w3-light-grey">
                        <th style="width: 20%">From</th>
                        <th style="width: 7%"></th>
                        <th style="width: 20%">To</th>
                        <th style="width: 20%">Ratio</th>
                        <th style="width: 33%">Commands</th>
                    </tr>
                </thead>
                <tbody data-bind="with: addHandler">
                    <tr class="w3-pale-yellow" data-bind="visible: addMode, with: newExchangeRate">
                        <td><input class="w3-input w3-border" data-bind="value: from" type="text"></td>
                        <td><span>&rarr;</td>
                        <td><input class="w3-input w3-border" data-bind="value: to" type="text"></td>
                        <td><input class="w3-input w3-border" data-bind="value: rate" type="text"></td>
                        <td>
                            <button class="w3-button w3-blue-grey" data-bind="click: $parent.save.bind($parent)">Save</button>
                            <button class="w3-button w3-blue-grey" data-bind="click: $parent.cancel.bind($parent)">Cancel</button>
                        </td>
                    </tr>
                </tbody>
                <tbody data-bind="foreach: exchangeRates">
                    <tr data-bind="visible: !editMode()">
                        <td data-bind="text: from"></td>
                        <td>&rarr;</td>
                        <td data-bind="text: to"></td>
                        <td data-bind="text: rate"></td>
                        <td>
                            <button class="w3-button w3-blue-grey" data-bind="click: edit">Edit</button>
                            <button class="w3-button w3-blue-grey" data-bind="click: destroy">Delete</button>
                        </td>
                    </tr>
                    <tr data-bind="visible: editMode">
                        <td><input class="w3-input w3-border" data-bind="value: editCopy().from" /></td>
                        <td><span>&rarr;</span></td>
                        <td><input class="w3-input w3-border" data-bind="value: editCopy().to" /></td>
                        <td><input class="w3-input w3-border" data-bind="value: editCopy().rate" /></td>
                        <td>
                            <button class="w3-button w3-blue-grey" data-bind="click: save">Save</button>
                            <button class="w3-button w3-blue-grey" data-bind="click: cancel">Cancel</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <div class="w3-col m4 l3">
                <div class="w3-card w3-container w3-margin-bottom" data-bind="with: exchangeCalculator">
                    <h3>Calculate</h3>
                    <div>
                        <label>Exchange rate</label>
                        <select data-bind="options: exchangeRates,
                                           optionsText: 'display',
                                           value: selectedExchangeRate,
                                           optionsCaption: 'Select exchange rate...'"
                                class="w3-select w3-border">
                        </select>
                    </div>
                    
                    <div>
                        <span data-bind="text: fromText"></span>
                        <input class="w3-input w3-border" data-bind="value: fromValue, enable: enabled" type="text">
                    </div>
                    
                    <div class="w3-margin-bottom">
                        <span data-bind="text: toText"></span>
                        <input class="w3-input w3-border" data-bind="value: toValue, enable: enabled" type="text">
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    
    <div id="probabilityCalculator" class="tab" style="display: none;">
    </div>
    
    <script src='lib/require.js'></script>
    <script>
        require(['js/require.config.js'], function () {
            require(['js/main.js'], function (main) {
                main.init();
            });
        });
    </script>
</body>